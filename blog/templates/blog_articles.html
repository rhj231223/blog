{% extends 'blog_base.html' %}
{% load static %}

{% block title %}
    文章列表
{% endblock %}

{% block header %}
    <script src="{% static 'js/blog_articles.js' %}"></script>
{% endblock %}



{% block main %}
    <div class="main_card p20">
        {% for article in articles %}
            <div class="card card_c" >
                <a href="{% url 'blog_article_detail' article_id=article.id %}">
                    <img class="card-img-top" src="{{ article.thumbnail }}" alt="Card image cap">
                </a>
                <div class="card-body card_body">
                    <div class="info">
                        <img src="{% static 'images/avatar.jpg' %}" alt="" class="avatar_c_card">
                        <svg xmlns="http://www.w3.org/2000/svg" width="19" viewBox="0 0 19 19" class="blog-icon-fill" style="fill-rule: evenodd;"><path d="M15.3812,6.495914 L12.6789333,8.77258837 C12.6191333,8.84477644 12.5099333,8.85722265 12.4354,8.79997005 C12.4215333,8.79001308 12.4094,8.77756686 12.3998667,8.76429089 L9.78686667,6.14327115 C9.67766667,5.99225704 9.46186667,5.95491839 9.305,6.05863687 C9.26946667,6.08186981 9.23913333,6.11091099 9.21573333,6.14493065 L6.60013333,8.81075677 C6.5464,8.88626383 6.43893333,8.90534803 6.3592,8.85390366 C6.34446667,8.84394669 6.33146667,8.83233022 6.32106667,8.81905425 L3.61966667,6.50587098 C3.5018,6.36149485 3.28426667,6.33577266 3.13346667,6.44861837 C3.0494,6.51167921 3,6.60792997 3,6.70998895 L4,14 L15,14 L16,6.70169148 C16,6.51831719 15.8448667,6.36979232 15.6533333,6.36979232 C15.5476,6.36979232 15.4470667,6.41625821 15.3812,6.495914 Z"></path></svg>
                        <span>{{ article.create_time|date:'m-d' }}</span>
                        <span class="middot">&middot;</span>
                        <span> {{ article.create_time|date:'H:i' }}</span>
                    </div>
                    <div class="card-title card_title"><a href="{% url 'blog_article_detail' article_id=article.id %}">{{ article.title|truncatechars:10 }}</a></div>
                    <div class="card-text card_text">{{ article.content|striptags|truncatechars:30 }}</div>
                    <div class="icon_info">
                        <svg xmlns="http://www.w3.org/2000/svg" width="19" viewBox="0 0 19 19" role="img" class="icon_eye">
                            <path d="M18.6514224,10.4604595 C17.3924224,11.9688254 13.9774224,15.4790227 9.46342244,15.5 L9.42442244,15.5 C6.26242244,15.5 3.20842244,13.7938483 0.345422443,10.4264963 C-0.115140814,9.88163847 -0.115140814,9.08439833 0.345422443,8.5395405 C1.60442244,7.03117456 5.01942244,3.52097727 9.53342244,3.5 L9.57342244,3.5 C12.7354224,3.5 15.7894224,5.20615167 18.6524224,8.5735037 C19.1122856,9.11875503 19.1118633,9.91569484 18.6514224,10.4604595 Z M17.8674224,9.2228003 C15.2084224,6.09518855 12.4194224,4.50990594 9.57442244,4.50990594 L9.54042244,4.50990594 C5.46142244,4.52888537 2.30642244,7.78335969 1.14042244,9.18084575 C0.991393136,9.3517953 0.988008897,9.60533857 1.13242244,9.78019645 C3.79142244,12.9078082 6.58142244,14.4920919 9.42542244,14.4920919 L9.46042244,14.4920919 C13.5394224,14.4741114 16.6934224,11.2196371 17.8604224,9.822151 C18.0095734,9.6511131 18.0125381,9.39726759 17.8674224,9.2228003 L17.8674224,9.2228003 Z M9.49942244,13.3932823 C7.35251405,13.3646853 5.63255349,11.6080263 5.65157552,9.46333471 C5.67059754,7.31864313 7.42144652,5.59270141 9.56852513,5.6021069 C11.7156037,5.61151239 13.4512316,7.35272696 13.4514224,9.49750271 C13.4349115,11.6625186 11.6668124,13.4054651 9.49942244,13.3932823 L9.49942244,13.3932823 Z M9.49942244,6.61762258 C7.91092198,6.63961751 6.63891624,7.93990193 6.65354481,9.52676854 C6.66817338,11.1136351 7.96393479,12.3902997 9.55257137,12.3830695 C11.1412079,12.3758393 12.4252698,11.0874333 12.4254224,9.50049946 C12.4127657,7.89797688 11.1037033,6.60820738 9.49942244,6.61762258 L9.49942244,6.61762258 Z"></path></svg>
                        <span>{{ article.read_count }}</span>

                        <svg xmlns="http://www.w3.org/2000/svg" width="19" viewBox="0 0 19 19" role="img" class="icon_message">
                            <path d="M9.5,13 L15,13 C15.5522847,13 16,12.5522847 16,12 L16,12 L16,5 C16,4.44771525 15.5522847,4 15,4 L15,4 L4,4 L4,4 C3.44771525,4 3,4.44771525 3,5 L3,12 C3,12.5522847 3.44771525,13 4,13 L7,13 L7,15.5 L9.5,13 Z M15.0081158,13.973325 L10,13.973325 L7.42191625,16.5445317 C6.63661359,17.3277395 6,17.0667904 6,15.9700713 L6,13.973325 L3.99188419,13.973325 C2.89179693,13.973325 2,13.0706688 2,11.979044 L2,4.994281 C2,3.89287002 2.89339733,3 3.99188419,3 L15.0081158,3 C16.1082031,3 17,3.90265618 17,4.994281 L17,11.979044 C17,13.0804549 16.1066027,13.973325 15.0081158,13.973325 Z"></path></svg>
                        <span class="message_span">{{ article.comments|length|default:0 }}</span>
                    </div>
                </div>
            </div>
        {% endfor %}
        <div class="pag_div">
            <ul class="pagination pagination-sm justify-content-center">
                {% if not search_content %}
                    {% if current_page > show_page_num %}
                        <li class="page-item"><a href="{% url 'blog_articles' page=1 %}" class="page-link page_link">首页</a></li>
                    {% endif %}
                    {% if current_page >= 2 %}
                        <li class="page-item"><a href="{% url 'blog_articles' page=current_page|add:-1 %}" class="page-link page_link">&laquo;</a></li>
                    {% endif %}

                    {% for page in page_li %}
                        {% if page == current_page %}
                            <li class="page-item page_item active"><a href="{% url 'blog_articles' page=page %}" class="page-link page_link">{{ page }}</a></li>
                        {% else %}
                            <li class="page-item"><a href="{% url 'blog_articles' page=page %}" class="page-link page_link">{{ page }}</a></li>
                        {% endif %}
                    {% endfor %}
                    <li class="page-item"><span class="page-link page_link total">共 {{ total_page }} 页</span></li>

                    {% if current_page < total_page %}
                        <li class="page-item"><a href="{% url 'blog_articles' page=current_page|add:1 %}" class="page-link page_link">&raquo;</a></li>
                    {% endif %}
                    {% if current_page <= show_end_num  %}
                        <li class="page-item"><a href="{% url 'blog_articles' page=total_page %}" class="page-link page_link">尾页</a></li>
                    {% endif %}
                {% endif %}



{#                {% if search_content %}#}
{#                    <li class="page-item"><span class="page-link page_link">当前 {{ current_page }} 页</span></li>#}
{#                {% endif %}#}
{#                <li class="page-item"><span class="page-link page_link">共 {{ total_page }} 页</span></li>#}
                <div class="input-group input-group-sm col-2">
                    <input type="text" class="form-control" name="input_page" placeholder="页数">
                    <div class="input-group-append">
                        <button class="btn btn-outline-primary" id="btn_page">跳转</button>
                    </div>

                </div>
            </ul>

        </div>

    </div>

{% endblock %}

